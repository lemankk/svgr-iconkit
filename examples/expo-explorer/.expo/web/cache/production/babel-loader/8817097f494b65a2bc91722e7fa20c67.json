{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _react=_interopRequireDefault(require(\"react\"));var _Box=_interopRequireDefault(require(\"../../primitives/Box\"));var _hooks=require(\"../../../hooks\");var _getIndexedChildren=_interopRequireDefault(require(\"../../../utils/getIndexedChildren\"));var _Context=require(\"./Context\");var _this=this,_jsxFileName=\"/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/Accordion/Accordion.tsx\";var Accordion=function Accordion(_ref,ref){var children=_ref.children,pIndex=_ref.index,defaultIndex=_ref.defaultIndex,allowMultiple=_ref.allowMultiple,allowToggle=_ref.allowToggle,onChange=_ref.onChange,props=(0,_objectWithoutProperties2.default)(_ref,[\"children\",\"index\",\"defaultIndex\",\"allowMultiple\",\"allowToggle\",\"onChange\"]);var _useThemeProps=(0,_hooks.useThemeProps)('Accordion',props),endingHeight=_useThemeProps.endingHeight,startingHeight=_useThemeProps.startingHeight,duration=_useThemeProps.duration,isOpen=_useThemeProps.isOpen,onAnimationEnd=_useThemeProps.onAnimationEnd,onAnimationStart=_useThemeProps.onAnimationStart,newProps=(0,_objectWithoutProperties2.default)(_useThemeProps,[\"endingHeight\",\"startingHeight\",\"duration\",\"isOpen\",\"onAnimationEnd\",\"onAnimationStart\"]);var _React$useState=_react.default.useState(pIndex||defaultIndex||[]),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),index=_React$useState2[0],setIndex=_React$useState2[1];var changeHandler=function changeHandler(isOpening,activeIndex){var indexCopy=index.map(function(i){return i;});if(allowToggle){if(isOpening){indexCopy.push(activeIndex);allowMultiple?setIndex(indexCopy):setIndex([activeIndex]);}else{setIndex(index.splice(index.indexOf(activeIndex),1));}}else{if(isOpening){indexCopy.push(activeIndex);allowMultiple?setIndex(indexCopy):setIndex([activeIndex]);}else{indexCopy=indexCopy.filter(function(n){return n!==activeIndex;});setIndex(indexCopy);}}onChange&&onChange(indexCopy);};return _react.default.createElement(_Context.AccordionContext.Provider,{value:{index:index,changeHandler:changeHandler,AnimationProps:{endingHeight:endingHeight,startingHeight:startingHeight,duration:duration,isOpen:isOpen,onAnimationEnd:onAnimationEnd,onAnimationStart:onAnimationStart}},__self:_this,__source:{fileName:_jsxFileName,lineNumber:52,columnNumber:5}},_react.default.createElement(_Box.default,(0,_extends2.default)({overflow:\"hidden\"},newProps,{ref:ref,__self:_this,__source:{fileName:_jsxFileName,lineNumber:66,columnNumber:7}}),(0,_getIndexedChildren.default)(children)));};var _default=_react.default.memo(_react.default.forwardRef(Accordion));exports.default=_default;","map":{"version":3,"sources":["Accordion.tsx"],"names":["Accordion","children","index","pIndex","defaultIndex","allowMultiple","allowToggle","onChange","props","endingHeight","startingHeight","duration","isOpen","onAnimationEnd","onAnimationStart","newProps","setIndex","React","changeHandler","indexCopy","n","AnimationProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Box from '../../primitives/Box';\nimport type { IAccordionProps } from './types';\nimport { useThemeProps } from '../../../hooks';\nimport getIndexedChildren from '../../../utils/getIndexedChildren';\nimport { AccordionContext } from './Context';\n\nconst Accordion = (\n  {\n    children,\n    index: pIndex,\n    defaultIndex,\n    allowMultiple,\n    allowToggle,\n    onChange,\n    ...props\n  }: IAccordionProps,\n  ref: any\n) => {\n  const {\n    endingHeight,\n    startingHeight,\n    duration,\n    isOpen,\n    onAnimationEnd,\n    onAnimationStart,\n    ...newProps\n  } = useThemeProps('Accordion', props);\n\n  const [index, setIndex] = React.useState(pIndex || defaultIndex || []);\n  const changeHandler = (isOpening: boolean, activeIndex: number) => {\n    let indexCopy = index.map((i: number) => i);\n    if (allowToggle) {\n      if (isOpening) {\n        indexCopy.push(activeIndex);\n        allowMultiple ? setIndex(indexCopy) : setIndex([activeIndex]);\n      } else {\n        setIndex(index.splice(index.indexOf(activeIndex), 1));\n      }\n    } else {\n      if (isOpening) {\n        indexCopy.push(activeIndex);\n        allowMultiple ? setIndex(indexCopy) : setIndex([activeIndex]);\n      } else {\n        indexCopy = indexCopy.filter((n) => n !== activeIndex);\n        setIndex(indexCopy);\n      }\n    }\n    onChange && onChange(indexCopy);\n  };\n  return (\n    <AccordionContext.Provider\n      value={{\n        index: index,\n        changeHandler,\n        AnimationProps: {\n          endingHeight,\n          startingHeight,\n          duration,\n          isOpen,\n          onAnimationEnd,\n          onAnimationStart,\n        },\n      }}\n    >\n      <Box overflow=\"hidden\" {...newProps} ref={ref}>\n        {getIndexedChildren(children)}\n      </Box>\n    </AccordionContext.Provider>\n  );\n};\n\nexport default React.memo(React.forwardRef(Accordion));\n"]},"metadata":{},"sourceType":"script"}