{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _react=_interopRequireDefault(require(\"react\"));var _reactNative=require(\"react-native-web/dist/index\");var _Box=_interopRequireDefault(require(\"../../primitives/Box\"));var _lodash=_interopRequireDefault(require(\"lodash.isnil\"));var _this=this,_jsxFileName=\"/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/AspectRatio/index.tsx\";var AspectView=_react.default.forwardRef(function(props,ref){var _React$useState=_react.default.useState(),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),layout=_React$useState2[0],setLayout=_React$useState2[1];var inputStyle=[_reactNative.StyleSheet.flatten(props.style)||{}];if(layout){var _layout$width=layout.width,width=_layout$width===void 0?0:_layout$width,_layout$height=layout.height,height=_layout$height===void 0?0:_layout$height;if(width===0){inputStyle.push({width:height*props.aspectRatio,height:height});}else{inputStyle.push({width:width,height:width/props.aspectRatio});}}return _react.default.createElement(_Box.default,(0,_extends2.default)({},props,{ref:ref,style:inputStyle,onLayout:function onLayout(_ref){var inLayout=_ref.nativeEvent.layout;return setLayout(inLayout);},__self:_this,__source:{fileName:_jsxFileName,lineNumber:25,columnNumber:5}}));});var AspectRatio=function AspectRatio(_ref2,ref){var style=_ref2.style,ratio=_ref2.ratio,children=_ref2.children,props=(0,_objectWithoutProperties2.default)(_ref2,[\"style\",\"ratio\",\"children\"]);var computedStyle=style;var newChildWithProps=_react.default.cloneElement(children,(0,_extends2.default)({},children.props,{style:_reactNative.StyleSheet.absoluteFillObject}),children.props.children);var aspectRatio=!(0,_lodash.default)(ratio)?ratio:4/3;if(_reactNative.Platform.OS==='web'){return _react.default.createElement(AspectView,(0,_extends2.default)({},props,{aspectRatio:aspectRatio,style:style,ref:ref,__self:_this,__source:{fileName:_jsxFileName,lineNumber:54,columnNumber:7}}),newChildWithProps);}else{computedStyle=_reactNative.StyleSheet.flatten([style,{aspectRatio:aspectRatio}]);return _react.default.createElement(_Box.default,(0,_extends2.default)({},props,{style:computedStyle,ref:ref,__self:_this,__source:{fileName:_jsxFileName,lineNumber:61,columnNumber:7}}),newChildWithProps);}};var _default=_react.default.memo(_react.default.forwardRef(AspectRatio));exports.default=_default;","map":{"version":3,"sources":["index.tsx"],"names":["AspectView","React","layout","setLayout","inputStyle","StyleSheet","props","width","height","inLayout","AspectRatio","style","ratio","children","computedStyle","newChildWithProps","aspectRatio","Platform"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleSheet, ViewStyle, Platform } from 'react-native';\nimport { default as Box, IBoxProps } from '../../primitives/Box';\nimport isNil from 'lodash.isnil';\n\nexport type IAspectRatioProps = IBoxProps & {\n  style?: ViewStyle;\n  ratio?: number;\n  children: JSX.Element;\n};\n\nconst AspectView = React.forwardRef((props: any, ref?: any) => {\n  const [layout, setLayout] = React.useState();\n  const inputStyle = [StyleSheet.flatten(props.style) || {}];\n  if (layout) {\n    // @ts-ignore\n    let { width = 0, height = 0 } = layout;\n    if (width === 0) {\n      inputStyle.push({ width: height * props.aspectRatio, height });\n    } else {\n      inputStyle.push({ width, height: width / props.aspectRatio });\n    }\n  }\n  return (\n    <Box\n      {...props}\n      ref={ref}\n      style={inputStyle}\n      onLayout={({ nativeEvent: { layout: inLayout } }: any) =>\n        setLayout(inLayout)\n      }\n    />\n  );\n});\n\nconst AspectRatio = (\n  { style, ratio, children, ...props }: IAspectRatioProps,\n  ref?: any\n) => {\n  let computedStyle: ViewStyle | undefined = style;\n  let newChildWithProps = React.cloneElement(\n    children,\n    {\n      ...children.props,\n      style: StyleSheet.absoluteFillObject,\n    },\n    children.props.children\n  );\n  let aspectRatio = !isNil(ratio) ? ratio : 4 / 3;\n\n  // DOC:  It uses a aspectRatio property of React Native and manually calculate on Web\n  if (Platform.OS === 'web') {\n    return (\n      <AspectView {...props} aspectRatio={aspectRatio} style={style} ref={ref}>\n        {newChildWithProps}\n      </AspectView>\n    );\n  } else {\n    computedStyle = StyleSheet.flatten([style, { aspectRatio }]);\n    return (\n      <Box {...props} style={computedStyle} ref={ref}>\n        {newChildWithProps}\n      </Box>\n    );\n  }\n};\n\nexport default React.memo(React.forwardRef(AspectRatio));\n"]},"metadata":{},"sourceType":"script"}