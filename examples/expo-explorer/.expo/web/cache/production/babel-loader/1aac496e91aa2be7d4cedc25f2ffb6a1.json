{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _lodash=_interopRequireDefault(require(\"lodash.isnil\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native-web/dist/index\");var _primitives=require(\"../../primitives\");var _this=this,_jsxFileName=\"/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/Collapse/index.tsx\";function usePrevious(value){var ref=(0,_react.useRef)();function updatePrevious(newVal){ref.current=newVal;}(0,_react.useEffect)(function(){updatePrevious(value);},[value]);return{value:ref.current,updatePrevious:updatePrevious};}var Collapse=function Collapse(_ref,ref){var endingHeight=_ref.endingHeight,startingHeight=_ref.startingHeight,duration=_ref.duration,isOpen=_ref.isOpen,onAnimationEnd=_ref.onAnimationEnd,onAnimationStart=_ref.onAnimationStart,props=(0,_objectWithoutProperties2.default)(_ref,[\"endingHeight\",\"startingHeight\",\"duration\",\"isOpen\",\"onAnimationEnd\",\"onAnimationStart\"]);if(_reactNative.Platform.OS==='android'){_reactNative.UIManager.setLayoutAnimationEnabledExperimental&&_reactNative.UIManager.setLayoutAnimationEnabledExperimental(true);}var CustomLayoutLinear={duration:duration?duration:400,create:{type:_reactNative.LayoutAnimation.Types.easeInEaseOut,property:_reactNative.LayoutAnimation.Properties.opacity},update:{type:_reactNative.LayoutAnimation.Types.easeInEaseOut}};var defaultStartHeight=isOpen?endingHeight:startingHeight?startingHeight:1;var animatedStyle={height:defaultStartHeight};var animateView=function animateView(){if(onAnimationStart){onAnimationStart();}animatedStyle={height:isOpen?endingHeight:defaultStartHeight};var callback=onAnimationEnd?onAnimationEnd:function(){};_reactNative.LayoutAnimation.configureNext(CustomLayoutLinear,callback());};var wasOpen=usePrevious(isOpen);if(!(0,_lodash.default)(wasOpen.value)&&wasOpen.value!==isOpen){animateView();wasOpen.updatePrevious(isOpen);}var _React$useState=_react.default.useState(startingHeight!=null?startingHeight:0),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),size=_React$useState2[0],setSize=_React$useState2[1];var provideSize=function provideSize(layoutSize){setSize(layoutSize.height);};var _web={transition:\"height \"+(duration!=null?duration:'400')+\"ms\",height:isOpen?endingHeight||size:startingHeight||0};return _react.default.createElement(_primitives.Box,{style:(0,_extends2.default)({},animatedStyle,_reactNative.Platform.OS==='web'&&_web),overflow:\"hidden\",ref:ref,__self:_this,__source:{fileName:_jsxFileName,lineNumber:87,columnNumber:5}},_react.default.createElement(_primitives.Box,(0,_extends2.default)({overflow:_reactNative.Platform.OS==='web'?'auto':'scroll',onLayout:function onLayout(e){return provideSize(e.nativeEvent.layout);}},props,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:7}})));};var _default=_react.default.memo((0,_react.forwardRef)(Collapse));exports.default=_default;","map":{"version":3,"sources":["index.tsx"],"names":["ref","updatePrevious","value","Collapse","endingHeight","startingHeight","duration","isOpen","onAnimationEnd","onAnimationStart","props","Platform","UIManager","CustomLayoutLinear","create","type","LayoutAnimation","property","update","defaultStartHeight","animatedStyle","height","animateView","callback","wasOpen","usePrevious","size","setSize","React","provideSize","layoutSize","_web","transition","e"],"mappings":"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","sourcesContent":["import isNil from 'lodash.isnil';\nimport React, { useEffect, useRef, forwardRef } from 'react';\nimport { ViewStyle, LayoutAnimation, UIManager, Platform } from 'react-native';\nimport { Box, IBoxProps } from '../../primitives';\n\nexport type ICollapseProps = IBoxProps & {\n  style?: ViewStyle;\n  endingHeight?: number;\n  startingHeight?: number;\n  duration?: number;\n  animateOpacity?: boolean;\n  isOpen?: boolean;\n  onAnimationEnd?: Function;\n  onAnimationStart?: Function;\n};\n\nfunction usePrevious(value: any) {\n  const ref = useRef();\n  function updatePrevious(newVal: any) {\n    ref.current = newVal;\n  }\n  useEffect(() => {\n    updatePrevious(value);\n  }, [value]);\n  return { value: ref.current, updatePrevious };\n}\n\nconst Collapse = (\n  {\n    endingHeight,\n    startingHeight,\n    duration,\n    // animateOpacity,\n    isOpen,\n    onAnimationEnd,\n    onAnimationStart,\n    ...props\n  }: ICollapseProps,\n  ref?: any\n) => {\n  if (Platform.OS === 'android') {\n    UIManager.setLayoutAnimationEnabledExperimental &&\n      UIManager.setLayoutAnimationEnabledExperimental(true);\n  }\n  const CustomLayoutLinear = {\n    duration: duration ? duration : 400,\n    create: {\n      type: LayoutAnimation.Types.easeInEaseOut,\n      property: LayoutAnimation.Properties.opacity,\n    },\n    update: {\n      type: LayoutAnimation.Types.easeInEaseOut,\n    },\n  };\n  const defaultStartHeight: any = isOpen\n    ? endingHeight\n    : startingHeight\n    ? startingHeight\n    : 1;\n  let animatedStyle = { height: defaultStartHeight };\n  const animateView = () => {\n    if (onAnimationStart) {\n      onAnimationStart();\n    }\n    animatedStyle = {\n      height: isOpen ? endingHeight : defaultStartHeight,\n    };\n    let callback = onAnimationEnd ? onAnimationEnd : () => {};\n    LayoutAnimation.configureNext(CustomLayoutLinear, callback());\n  };\n\n  let wasOpen = usePrevious(isOpen);\n  if (!isNil(wasOpen.value) && wasOpen.value !== isOpen) {\n    animateView();\n    wasOpen.updatePrevious(isOpen);\n  }\n  const [size, setSize] = React.useState(startingHeight ?? 0);\n  const provideSize = (layoutSize: any) => {\n    setSize(layoutSize.height);\n  };\n  const _web = {\n    transition: `height ${duration ?? '400'}ms`,\n    height: isOpen ? endingHeight || size : startingHeight || 0,\n  };\n\n  return (\n    <Box\n      style={{ ...animatedStyle, ...(Platform.OS === 'web' && _web) }}\n      overflow=\"hidden\"\n      ref={ref}\n    >\n      <Box\n        overflow={Platform.OS === 'web' ? 'auto' : 'scroll'}\n        onLayout={(e) => provideSize(e.nativeEvent.layout)}\n        {...props}\n      />\n    </Box>\n  );\n};\n\nexport default React.memo(forwardRef(Collapse));\n"]},"metadata":{},"sourceType":"script"}