{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _react=_interopRequireWildcard(require(\"react\"));var _Box=_interopRequireDefault(require(\"../../primitives/Box\"));var _useThemeProps=require(\"../../../hooks/useThemeProps\");var _Popper=require(\"../Popper\");var _reactNative=require(\"react-native-web/dist/index\");var _hooks=require(\"../../../hooks\");var _useMenu=require(\"./useMenu\");var _Backdrop=_interopRequireDefault(require(\"../Backdrop\"));var _overlays=require(\"@react-native-aria/overlays\");var _Transitions=require(\"../Transitions\");var _focus=require(\"@react-native-aria/focus\");var _MenuContext=require(\"./MenuContext\");var _this=this,_jsxFileName=\"/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/Menu/Menu.tsx\";var Menu=function Menu(_ref,ref){var trigger=_ref.trigger,_ref$closeOnSelect=_ref.closeOnSelect,closeOnSelect=_ref$closeOnSelect===void 0?true:_ref$closeOnSelect,children=_ref.children,onOpen=_ref.onOpen,onClose=_ref.onClose,isOpenProp=_ref.isOpen,defaultIsOpen=_ref.defaultIsOpen,_ref$placement=_ref.placement,placement=_ref$placement===void 0?'bottom left':_ref$placement,restProps=(0,_objectWithoutProperties2.default)(_ref,[\"trigger\",\"closeOnSelect\",\"children\",\"onOpen\",\"onClose\",\"isOpen\",\"defaultIsOpen\",\"placement\"]);var triggerRef=_react.default.useRef(null);var _useControllableState=(0,_hooks.useControllableState)({value:isOpenProp,defaultValue:defaultIsOpen,onChange:function onChange(value){value?onOpen&&onOpen():onClose&&onClose();}}),_useControllableState2=(0,_slicedToArray2.default)(_useControllableState,2),isOpen=_useControllableState2[0],setIsOpen=_useControllableState2[1];var _usePropsResolution=(0,_useThemeProps.usePropsResolution)('Menu',restProps),transition=_usePropsResolution.transition,newProps=(0,_objectWithoutProperties2.default)(_usePropsResolution,[\"transition\"]);var handleOpen=_react.default.useCallback(function(){setIsOpen(true);},[setIsOpen]);var handleClose=_react.default.useCallback(function(){setIsOpen(false);},[setIsOpen]);var triggerProps=(0,_useMenu.useMenuTrigger)({handleOpen:handleOpen,isOpen:isOpen});var updatedTrigger=function updatedTrigger(){return trigger((0,_extends2.default)({},triggerProps,{ref:triggerRef,onPress:handleOpen}),{open:isOpen});};(0,_hooks.useKeyboardDismissable)({enabled:isOpen,callback:handleClose});return _react.default.createElement(_react.default.Fragment,null,updatedTrigger(),_react.default.createElement(_overlays.OverlayContainer,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:71,columnNumber:7}},_react.default.createElement(_Transitions.PresenceTransition,(0,_extends2.default)({visible:isOpen},transition,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:72,columnNumber:9}}),_react.default.createElement(_Popper.Popper,(0,_extends2.default)({triggerRef:triggerRef,onClose:handleClose,placement:placement},restProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:73,columnNumber:11}}),_react.default.createElement(_Backdrop.default,{bg:\"transparent\",onPress:handleClose,__self:_this,__source:{fileName:_jsxFileName,lineNumber:79,columnNumber:13}}),_react.default.createElement(_Popper.Popper.Content,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:13}},_react.default.createElement(_MenuContext.MenuContext.Provider,{value:{closeOnSelect:closeOnSelect,onClose:handleClose},__self:_this,__source:{fileName:_jsxFileName,lineNumber:81,columnNumber:15}},_react.default.createElement(_focus.FocusScope,{contain:true,restoreFocus:true,autoFocus:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:84,columnNumber:17}},_react.default.createElement(MenuContent,(0,_extends2.default)({menuRef:ref},newProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:85,columnNumber:19}}),children))))))));};var MenuContent=function MenuContent(_ref2){var menuRef=_ref2.menuRef,restProps=(0,_objectWithoutProperties2.default)(_ref2,[\"menuRef\"]);var menuProps=(0,_useMenu.useMenu)();var typeaheadProps=(0,_useMenu.useMenuTypeahead)(menuProps);return _react.default.createElement(_Box.default,(0,_extends2.default)({},restProps,menuProps,typeaheadProps,{ref:menuRef,__self:_this,__source:{fileName:_jsxFileName,lineNumber:106,columnNumber:5}}),_react.default.createElement(_reactNative.ScrollView,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:107,columnNumber:7}},restProps.children));};var _default=(0,_react.memo)((0,_react.forwardRef)(Menu));exports.default=_default;","map":{"version":3,"sources":["Menu.tsx"],"names":["Menu","trigger","closeOnSelect","children","onOpen","onClose","isOpen","isOpenProp","defaultIsOpen","placement","restProps","triggerRef","React","setIsOpen","value","defaultValue","onChange","transition","newProps","handleOpen","handleClose","triggerProps","updatedTrigger","ref","onPress","open","enabled","callback","MenuContent","menuRef","menuProps","typeaheadProps"],"mappings":"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","sourcesContent":["import React, { memo, forwardRef } from 'react';\nimport type { IMenuProps } from './types';\nimport Box from '../../primitives/Box';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport { Popper } from '../Popper';\nimport { ScrollView } from 'react-native';\nimport { useControllableState, useKeyboardDismissable } from '../../../hooks';\nimport { useMenuTrigger, useMenu, useMenuTypeahead } from './useMenu';\nimport Backdrop from '../Backdrop';\nimport { OverlayContainer } from '@react-native-aria/overlays';\nimport { PresenceTransition } from '../Transitions';\nimport { FocusScope } from '@react-native-aria/focus';\nimport { MenuContext } from './MenuContext';\n\nconst Menu = (\n  {\n    trigger,\n    closeOnSelect = true,\n    children,\n    onOpen,\n    onClose,\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    placement = 'bottom left',\n    ...restProps\n  }: IMenuProps,\n  ref?: any\n) => {\n  const triggerRef = React.useRef(null);\n  const [isOpen, setIsOpen] = useControllableState({\n    value: isOpenProp,\n    defaultValue: defaultIsOpen,\n    onChange: (value) => {\n      value ? onOpen && onOpen() : onClose && onClose();\n    },\n  });\n\n  const { transition, ...newProps } = usePropsResolution('Menu', restProps);\n  const handleOpen = React.useCallback(() => {\n    setIsOpen(true);\n  }, [setIsOpen]);\n\n  const handleClose = React.useCallback(() => {\n    setIsOpen(false);\n  }, [setIsOpen]);\n\n  const triggerProps = useMenuTrigger({\n    handleOpen,\n    isOpen,\n  });\n\n  let updatedTrigger = () => {\n    return trigger(\n      {\n        ...triggerProps,\n        ref: triggerRef,\n        onPress: handleOpen,\n      },\n      { open: isOpen }\n    );\n  };\n\n  useKeyboardDismissable({\n    enabled: isOpen,\n    callback: handleClose,\n  });\n\n  return (\n    <>\n      {updatedTrigger()}\n      <OverlayContainer>\n        <PresenceTransition visible={isOpen} {...transition}>\n          <Popper\n            triggerRef={triggerRef}\n            onClose={handleClose}\n            placement={placement}\n            {...restProps}\n          >\n            <Backdrop bg=\"transparent\" onPress={handleClose} />\n            <Popper.Content>\n              <MenuContext.Provider\n                value={{ closeOnSelect, onClose: handleClose }}\n              >\n                <FocusScope contain restoreFocus autoFocus>\n                  <MenuContent menuRef={ref} {...newProps}>\n                    {children}\n                  </MenuContent>\n                </FocusScope>\n              </MenuContext.Provider>\n            </Popper.Content>\n          </Popper>\n        </PresenceTransition>\n      </OverlayContainer>\n    </>\n  );\n};\n\nconst MenuContent = ({\n  menuRef,\n  ...restProps\n}: Omit<IMenuProps, 'trigger'> & { menuRef: any }) => {\n  const menuProps = useMenu();\n  const typeaheadProps = useMenuTypeahead(menuProps);\n\n  return (\n    <Box {...restProps} {...menuProps} {...typeaheadProps} ref={menuRef}>\n      <ScrollView>{restProps.children}</ScrollView>\n    </Box>\n  );\n};\n\nexport default memo(forwardRef(Menu));\n"]},"metadata":{},"sourceType":"script"}