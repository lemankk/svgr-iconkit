{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function _createForOfIteratorHelperLoose(o,allowArrayLike){var it;if(typeof Symbol===\"undefined\"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}it=o[Symbol.iterator]();return it.next.bind(it);}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}import _babelRuntimeHelpersEsmExtends from\"@babel/runtime/helpers/esm/extends\";import{NumberFormatter}from\"@internationalized/number\";import{MessageDictionary,MessageFormatter}from\"@internationalized/message\";import{useIsSSR}from\"@react-aria/ssr\";import _react,{useEffect,useState,useContext,useCallback,useMemo}from\"react\";var $d26e725ad56fbcb2c25f52b7de27$var$RTL_SCRIPTS=new Set(['Arab','Syrc','Samr','Mand','Thaa','Mend','Nkoo','Adlm','Rohg','Hebr']);var $d26e725ad56fbcb2c25f52b7de27$var$RTL_LANGS=new Set(['ae','ar','arc','bcc','bqi','ckb','dv','fa','glk','he','ku','mzn','nqo','pnb','ps','sd','ug','ur','yi']);function $d26e725ad56fbcb2c25f52b7de27$export$isRTL(locale){if(Intl.Locale){var script=new Intl.Locale(locale).maximize().script;return $d26e725ad56fbcb2c25f52b7de27$var$RTL_SCRIPTS.has(script);}var lang=locale.split('-')[0];return $d26e725ad56fbcb2c25f52b7de27$var$RTL_LANGS.has(lang);}function $e851d0b81d46abd5f971c8e95c27f1$export$getDefaultLocale(){var locale=typeof navigator!=='undefined'&&(navigator.language||navigator.userLanguage)||'en-US';return{locale:locale,direction:$d26e725ad56fbcb2c25f52b7de27$export$isRTL(locale)?'rtl':'ltr'};}var $e851d0b81d46abd5f971c8e95c27f1$var$currentLocale=$e851d0b81d46abd5f971c8e95c27f1$export$getDefaultLocale();var $e851d0b81d46abd5f971c8e95c27f1$var$listeners=new Set();function $e851d0b81d46abd5f971c8e95c27f1$var$updateLocale(){$e851d0b81d46abd5f971c8e95c27f1$var$currentLocale=$e851d0b81d46abd5f971c8e95c27f1$export$getDefaultLocale();for(var _iterator=_createForOfIteratorHelperLoose($e851d0b81d46abd5f971c8e95c27f1$var$listeners),_step;!(_step=_iterator()).done;){var listener=_step.value;listener($e851d0b81d46abd5f971c8e95c27f1$var$currentLocale);}}function $e851d0b81d46abd5f971c8e95c27f1$export$useDefaultLocale(){var isSSR=useIsSSR();var _useState=useState($e851d0b81d46abd5f971c8e95c27f1$var$currentLocale),_useState2=_slicedToArray(_useState,2),defaultLocale=_useState2[0],setDefaultLocale=_useState2[1];useEffect(function(){if($e851d0b81d46abd5f971c8e95c27f1$var$listeners.size===0){window.addEventListener('languagechange',$e851d0b81d46abd5f971c8e95c27f1$var$updateLocale);}$e851d0b81d46abd5f971c8e95c27f1$var$listeners.add(setDefaultLocale);return function(){$e851d0b81d46abd5f971c8e95c27f1$var$listeners.delete(setDefaultLocale);if($e851d0b81d46abd5f971c8e95c27f1$var$listeners.size===0){window.removeEventListener('languagechange',$e851d0b81d46abd5f971c8e95c27f1$var$updateLocale);}};},[]);if(isSSR){return{locale:'en-US',direction:'ltr'};}return defaultLocale;}var $cff8541df3b5c83067b2ab3ee0d20$var$I18nContext=_react.createContext(null);export function I18nProvider(props){var locale=props.locale,children=props.children;var defaultLocale=$e851d0b81d46abd5f971c8e95c27f1$export$useDefaultLocale();var value=locale?{locale:locale,direction:$d26e725ad56fbcb2c25f52b7de27$export$isRTL(locale)?'rtl':'ltr'}:defaultLocale;return _react.createElement($cff8541df3b5c83067b2ab3ee0d20$var$I18nContext.Provider,{value:value},children);}export function useLocale(){var defaultLocale=$e851d0b81d46abd5f971c8e95c27f1$export$useDefaultLocale();var context=useContext($cff8541df3b5c83067b2ab3ee0d20$var$I18nContext);return context||defaultLocale;}var $f58d206cee90f9c2bf3c03e4522c35$var$cache=new WeakMap();function $f58d206cee90f9c2bf3c03e4522c35$var$getCachedDictionary(strings){var dictionary=$f58d206cee90f9c2bf3c03e4522c35$var$cache.get(strings);if(!dictionary){dictionary=new MessageDictionary(strings);$f58d206cee90f9c2bf3c03e4522c35$var$cache.set(strings,dictionary);}return dictionary;}export function useMessageFormatter(strings){var _useLocale=useLocale(),locale=_useLocale.locale;var dictionary=useMemo(function(){return $f58d206cee90f9c2bf3c03e4522c35$var$getCachedDictionary(strings);},[strings]);var formatter=useMemo(function(){return new MessageFormatter(locale,dictionary);},[locale,dictionary]);return useCallback(function(key,variables){return formatter.format(key,variables);},[formatter]);}var $b0007c63a64054c318efb8b6cd0053f$var$formatterCache=new Map();export function useDateFormatter(options){var _useLocale2=useLocale(),locale=_useLocale2.locale;var cacheKey=locale+(options?Object.entries(options).sort(function(a,b){return a[0]<b[0]?-1:1;}).join():'');if($b0007c63a64054c318efb8b6cd0053f$var$formatterCache.has(cacheKey)){return $b0007c63a64054c318efb8b6cd0053f$var$formatterCache.get(cacheKey);}var formatter=new Intl.DateTimeFormat(locale,options);$b0007c63a64054c318efb8b6cd0053f$var$formatterCache.set(cacheKey,formatter);return formatter;}export function useNumberFormatter(options){if(options===void 0){options={};}var _useLocale3=useLocale(),locale=_useLocale3.locale;return useMemo(function(){return new NumberFormatter(locale,options);},[locale,options]);}var $a4045a18d7252bf6de9312e613c4e$var$cache=new Map();export function useCollator(options){var _useLocale4=useLocale(),locale=_useLocale4.locale;var cacheKey=locale+(options?Object.entries(options).sort(function(a,b){return a[0]<b[0]?-1:1;}).join():'');if($a4045a18d7252bf6de9312e613c4e$var$cache.has(cacheKey)){return $a4045a18d7252bf6de9312e613c4e$var$cache.get(cacheKey);}var formatter=new Intl.Collator(locale,options);$a4045a18d7252bf6de9312e613c4e$var$cache.set(cacheKey,formatter);return formatter;}export function useFilter(options){var collator=useCollator(_babelRuntimeHelpersEsmExtends({usage:'search'},options));return{startsWith:function startsWith(string,substring){if(substring.length===0){return true;}string=string.normalize('NFC');substring=substring.normalize('NFC');return collator.compare(string.slice(0,substring.length),substring)===0;},endsWith:function endsWith(string,substring){if(substring.length===0){return true;}string=string.normalize('NFC');substring=substring.normalize('NFC');return collator.compare(string.slice(-substring.length),substring)===0;},contains:function contains(string,substring){if(substring.length===0){return true;}string=string.normalize('NFC');substring=substring.normalize('NFC');var scan=0;var sliceLen=substring.length;for(;scan+sliceLen<=string.length;scan++){var slice=string.slice(scan,scan+sliceLen);if(collator.compare(substring,slice)===0){return true;}}return false;}};}","map":{"version":3,"sources":["packages/@react-aria/i18n/src/utils.ts","packages/@react-aria/i18n/src/useDefaultLocale.ts","packages/@react-aria/i18n/src/context.tsx","packages/@react-aria/i18n/src/useMessageFormatter.ts","packages/@react-aria/i18n/src/useDateFormatter.ts","packages/@react-aria/i18n/src/useNumberFormatter.ts","packages/@react-aria/i18n/src/useCollator.ts","packages/@react-aria/i18n/src/useFilter.ts"],"names":["RTL_SCRIPTS","RTL_LANGS","Intl","script","lang","locale","navigator","direction","currentLocale","getDefaultLocale","listeners","listener","isSSR","useIsSSR","useState","useEffect","window","I18nContext","React","children","defaultLocale","value","context","useContext","cache","dictionary","useMemo","getCachedDictionary","formatter","useCallback","formatterCache","cacheKey","options","Object","a","b","collator","usage","startsWith","substring","string","endsWith","contains","scan","sliceLen","slice"],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n// https://en.wikipedia.org/wiki/Right-to-left\nconst RTL_SCRIPTS = new Set(['Arab', 'Syrc', 'Samr', 'Mand', 'Thaa', 'Mend', 'Nkoo', 'Adlm', 'Rohg', 'Hebr']);\nconst RTL_LANGS = new Set(['ae', 'ar', 'arc', 'bcc', 'bqi', 'ckb', 'dv', 'fa', 'glk', 'he', 'ku', 'mzn', 'nqo', 'pnb', 'ps', 'sd', 'ug', 'ur', 'yi']);\n\n/**\n * Determines if a locale is read right to left using [Intl.Locale]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale}.\n */\nexport function isRTL(locale: string) {\n  // If the Intl.Locale API is available, use it to get the script for the locale.\n  // This is more accurate than guessing by language, since languages can be written in multiple scripts.\n  // @ts-ignore\n  if (Intl.Locale) {\n    // @ts-ignore\n    let script = new Intl.Locale(locale).maximize().script;\n    return RTL_SCRIPTS.has(script);\n  }\n\n  // If not, just guess by the language (first part of the locale)\n  let lang = locale.split('-')[0];\n  return RTL_LANGS.has(lang);\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Direction} from '@react-types/shared';\nimport {isRTL} from './utils';\nimport {useEffect, useState} from 'react';\nimport {useIsSSR} from '@react-aria/ssr';\n\nexport interface Locale {\n  /** The [BCP47](https://www.ietf.org/rfc/bcp/bcp47.txt) language code for the locale. */\n  locale: string,\n  /** The writing direction for the locale. */\n  direction: Direction\n}\n\n/**\n * Gets the locale setting of the browser.\n */\nexport function getDefaultLocale(): Locale {\n  // @ts-ignore\n  let locale = (typeof navigator !== 'undefined' && (navigator.language || navigator.userLanguage)) || 'en-US';\n  return {\n    locale,\n    direction: isRTL(locale) ? 'rtl' : 'ltr'\n  };\n}\n\nlet currentLocale = getDefaultLocale();\nlet listeners = new Set<(locale: Locale) => void>();\n\nfunction updateLocale() {\n  currentLocale = getDefaultLocale();\n  for (let listener of listeners) {\n    listener(currentLocale);\n  }\n}\n\n/**\n * Returns the current browser/system language, and updates when it changes.\n */\nexport function useDefaultLocale(): Locale {\n  let isSSR = useIsSSR();\n  let [defaultLocale, setDefaultLocale] = useState(currentLocale);\n\n  useEffect(() => {\n    if (listeners.size === 0) {\n      window.addEventListener('languagechange', updateLocale);\n    }\n\n    listeners.add(setDefaultLocale);\n\n    return () => {\n      listeners.delete(setDefaultLocale);\n      if (listeners.size === 0) {\n        window.removeEventListener('languagechange', updateLocale);\n      }\n    };\n  }, []);\n\n  // We cannot determine the browser's language on the server, so default to\n  // en-US. This will be updated after hydration on the client to the correct value.\n  if (isSSR) {\n    return {\n      locale: 'en-US',\n      direction: 'ltr'\n    };\n  }\n\n  return defaultLocale;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {isRTL} from './utils';\nimport {Locale, useDefaultLocale} from './useDefaultLocale';\nimport React, {ReactNode, useContext} from 'react';\n\ninterface ProviderProps {\n  /** Contents that should have the locale applied. */\n  children: ReactNode,\n  /** The locale to apply to the children. */\n  locale?: string\n}\n\nconst I18nContext = React.createContext<Locale>(null);\n\n/**\n * Provides the locale for the application to all child components.\n */\nexport function I18nProvider(props: ProviderProps) {\n  let {locale, children} = props;\n  let defaultLocale = useDefaultLocale();\n\n  let value: Locale = locale ? {\n    locale,\n    direction: isRTL(locale) ? 'rtl' : 'ltr'\n  } : defaultLocale;\n\n  return (\n    <I18nContext.Provider value={value}>\n      {children}\n    </I18nContext.Provider>\n  );\n}\n\n/**\n * Returns the current locale and layout direction.\n */\nexport function useLocale(): Locale {\n  let defaultLocale = useDefaultLocale();\n  let context = useContext(I18nContext);\n  return context || defaultLocale;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {LocalizedStrings, MessageDictionary, MessageFormatter} from '@internationalized/message';\nimport {useCallback, useMemo} from 'react';\nimport {useLocale} from './context';\n\ntype FormatMessage = (key: string, variables?: {[key: string]: any}) => string;\n\nconst cache = new WeakMap();\nfunction getCachedDictionary(strings: LocalizedStrings) {\n  let dictionary = cache.get(strings);\n  if (!dictionary) {\n    dictionary = new MessageDictionary(strings);\n    cache.set(strings, dictionary);\n  }\n\n  return dictionary;\n}\n\n/**\n * Handles formatting ICU Message strings to create localized strings for the current locale.\n * Automatically updates when the locale changes, and handles caching of messages for performance.\n * @param strings - A mapping of languages to strings by key.\n */\nexport function useMessageFormatter(strings: LocalizedStrings): FormatMessage {\n  let {locale} = useLocale();\n  let dictionary = useMemo(() => getCachedDictionary(strings), [strings]);\n  let formatter = useMemo(() => new MessageFormatter(locale, dictionary), [locale, dictionary]);\n  return useCallback((key, variables) => formatter.format(key, variables), [formatter]);\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {useLocale} from './context';\n\nlet formatterCache = new Map<string, Intl.DateTimeFormat>();\n\n/**\n * Provides localized date formatting for the current locale. Automatically updates when the locale changes,\n * and handles caching of the date formatter for performance.\n * @param options - Formatting options.\n */\nexport function useDateFormatter(options?: Intl.DateTimeFormatOptions): Intl.DateTimeFormat {\n  let {locale} = useLocale();\n\n  let cacheKey = locale + (options ? Object.entries(options).sort((a, b) => a[0] < b[0] ? -1 : 1).join() : '');\n  if (formatterCache.has(cacheKey)) {\n    return formatterCache.get(cacheKey);\n  }\n\n  let formatter = new Intl.DateTimeFormat(locale, options);\n  formatterCache.set(cacheKey, formatter);\n  return formatter;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {NumberFormatOptions, NumberFormatter} from '@internationalized/number';\nimport {useLocale} from './context';\nimport {useMemo} from 'react';\n\n/**\n * Provides localized number formatting for the current locale. Automatically updates when the locale changes,\n * and handles caching of the number formatter for performance.\n * @param options - Formatting options.\n */\nexport function useNumberFormatter(options: NumberFormatOptions = {}): Intl.NumberFormat {\n  let {locale} = useLocale();\n  return useMemo(() => new NumberFormatter(locale, options), [locale, options]);\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {useLocale} from './context';\n\nlet cache = new Map<string, Intl.Collator>();\n\n/**\n * Provides localized string collation for the current locale. Automatically updates when the locale changes,\n * and handles caching of the collator for performance.\n * @param options - Collator options.\n */\nexport function useCollator(options?: Intl.CollatorOptions): Intl.Collator {\n  let {locale} = useLocale();\n\n  let cacheKey = locale + (options ? Object.entries(options).sort((a, b) => a[0] < b[0] ? -1 : 1).join() : '');\n  if (cache.has(cacheKey)) {\n    return cache.get(cacheKey);\n  }\n\n  let formatter = new Intl.Collator(locale, options);\n  cache.set(cacheKey, formatter);\n  return formatter;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {useCollator} from './useCollator';\n\ninterface Filter {\n  /** Returns whether a string starts with a given substring. */\n  startsWith(string: string, substring: string): boolean,\n  /** Returns whether a string ends with a given substring. */\n  endsWith(string: string, substring: string): boolean,\n  /** Returns whether a string contains a given substring. */\n  contains(string: string, substring: string): boolean\n}\n\n/**\n * Provides localized string search functionality that is useful for filtering or matching items\n * in a list. Options can be provided to adjust the sensitivity to case, diacritics, and other parameters.\n */\nexport function useFilter(options?: Intl.CollatorOptions): Filter {\n  let collator = useCollator({\n    usage: 'search',\n    ...options\n  });\n\n  // TODO(later): these methods don't currently support the ignorePunctuation option.\n\n  return {\n    startsWith(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      // Normalize both strings so we can slice safely\n      // TODO: take into account the ignorePunctuation option as well...\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n      return collator.compare(string.slice(0, substring.length), substring) === 0;\n    },\n    endsWith(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n      return collator.compare(string.slice(-substring.length), substring) === 0;\n    },\n    contains(string, substring) {\n      if (substring.length === 0) {\n        return true;\n      }\n\n      string = string.normalize('NFC');\n      substring = substring.normalize('NFC');\n\n      let scan = 0;\n      let sliceLen = substring.length;\n      for (; scan + sliceLen <= string.length; scan++) {\n        let slice = string.slice(scan, scan + sliceLen);\n        if (collator.compare(substring, slice) === 0) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}